<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Memoria - Emojis</title>
    <link rel="stylesheet" href="styles.css">
    <script src="database.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header del juego -->
        <header class="game-header">
            <h1>üß† Juego de Memoria</h1>
            <div class="game-info">
                <div class="info-item">
                    <span class="label">Nivel:</span>
                    <span id="level-display" class="value">1</span>
                </div>
                <div class="info-item">
                    <span class="label">Movimientos:</span>
                    <span id="moves-display" class="value">0</span>
                </div>
                <div class="info-item">
                    <span class="label">Tiempo:</span>
                    <span id="timer-display" class="value">--:--</span>
                </div>
            </div>
            <button id="restart-btn" class="btn btn-restart">üîÑ Reiniciar</button>
        </header>

        <!-- Panel de control -->
        <div class="controls">
            <button id="start-btn" class="btn btn-primary">üéÆ Comenzar Juego</button>
            <button id="next-level-btn" class="btn btn-success hidden">‚û°Ô∏è Siguiente Nivel</button>
            <button id="finish-game-btn" class="btn btn-danger hidden">üèÅ Finalizar Juego</button>
            <button id="rankings-btn" class="btn btn-secondary">üèÜ Rankings</button>
            <button id="help-btn" class="btn btn-info">‚ùì Ayuda</button>
        </div>

        <!-- Configuraciones del juego -->
        <div class="game-settings" id="game-settings">
            <div class="settings-row">
                <label class="setting-item">
                    <input type="checkbox" id="distractions-toggle"> 
                    <span class="setting-label">üå™Ô∏è Distracciones Visuales</span>
                </label>
                <label class="setting-item">
                    <input type="checkbox" id="sound-toggle" checked> 
                    <span class="setting-label">üîä Sonidos</span>
                </label>
                <label class="setting-item">
                    <input type="checkbox" id="powerups-toggle" checked> 
                    <span class="setting-label">‚ö° Power-ups</span>
                </label>
            </div>
        </div>

        <!-- Power-ups disponibles -->
        <div class="powerups-bar" id="powerups-bar">
            <div class="powerup-item" id="hint-powerup" title="Mostrar una pareja por 3 segundos">
                <span class="powerup-icon">üí°</span>
                <span class="powerup-count" id="hint-count">3</span>
            </div>
            <div class="powerup-item" id="freeze-powerup" title="Congelar el tiempo por 10 segundos">
                <span class="powerup-icon">‚ùÑÔ∏è</span>
                <span class="powerup-count" id="freeze-count">2</span>
            </div>
            <div class="powerup-item" id="shuffle-powerup" title="Reorganizar todas las cartas no emparejadas">
                <span class="powerup-icon">üîÄ</span>
                <span class="powerup-count" id="shuffle-count">1</span>
            </div>
        </div>

        <!-- Tablero de juego -->
        <div class="game-board" id="game-board">
            <!-- Las cartas se generar√°n din√°micamente aqu√≠ -->
        </div>

        <!-- Mensajes del juego -->
        <div id="game-message" class="game-message hidden">
            <div class="message-content">
                <h2 id="message-title"></h2>
                <p id="message-text"></p>
                <button id="message-btn" class="btn btn-primary">OK</button>
            </div>
        </div>

        <!-- Modal de nombre inicial -->
        <div id="name-input-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üëã ¬°Bienvenido al Juego de Memoria!</h2>
                </div>
                <div class="modal-body">
                    <p>Para comenzar a jugar y aparecer en los rankings, por favor introduce tu nombre:</p>
                    <div class="input-group">
                        <input type="text" id="initial-player-name" placeholder="Escribe tu nombre aqu√≠..." maxlength="20">
                        <button id="start-with-name" class="btn btn-primary">üöÄ ¬°Empezar a Jugar!</button>
                    </div>
                    <p class="note">üí° Tu nombre se guardar√° para futuras partidas</p>
                </div>
            </div>
        </div>

        <!-- Modal de Rankings -->
        <div id="rankings-modal" class="modal hidden">
            <div class="modal-content rankings-dashboard">
                <div class="modal-header">
                    <h2>üèÜ Dashboard de Rankings</h2>
                    <button id="close-rankings" class="btn btn-close">√ó</button>
                </div>
                
                <div class="dashboard-tabs">
                    <button class="tab-btn active" data-tab="global">üåç Global</button>
                    <button class="tab-btn" data-tab="levels">üìä Por Nivel</button>
                    <button class="tab-btn" data-tab="stats">üìà Estad√≠sticas</button>
                    <button class="tab-btn" data-tab="search">üîç Buscar</button>
                </div>

                <div class="dashboard-content">
                    <!-- Tab Global -->
                    <div id="global-tab" class="tab-content active">
                        <div class="rankings-header">
                            <h3>ü•á Top 10 Mundial</h3>
                            <div class="player-input-section">
                                <input type="text" id="player-name" placeholder="Tu nombre" maxlength="20">
                                <button id="save-name" class="btn btn-small">üíæ Guardar</button>
                            </div>
                        </div>
                        <div class="rankings-table">
                            <div class="table-header">
                                <span class="pos">#</span>
                                <span class="name">Jugador</span>
                                <span class="score">Puntuaci√≥n</span>
                                <span class="level">Nivel</span>
                                <span class="time">Tiempo</span>
                                <span class="efficiency">Eficiencia</span>
                            </div>
                            <div id="global-rankings" class="table-body">
                                <!-- Rankings se cargan din√°micamente -->
                            </div>
                        </div>
                    </div>

                    <!-- Tab Por Niveles -->
                    <div id="levels-tab" class="tab-content">
                        <div class="level-selector">
                            <button class="level-btn active" data-level="1">Nivel 1</button>
                            <button class="level-btn" data-level="2">Nivel 2</button>
                            <button class="level-btn" data-level="3">Nivel 3</button>
                            <button class="level-btn" data-level="4">Nivel 4</button>
                            <button class="level-btn" data-level="5">Nivel 5</button>
                        </div>
                        <div id="level-rankings" class="rankings-table">
                            <!-- Rankings por nivel -->
                        </div>
                    </div>

                    <!-- Tab Estad√≠sticas -->
                    <div id="stats-tab" class="tab-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">üéÆ</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="total-games">-</div>
                                    <div class="stat-label">Total Partidas</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üèÜ</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="best-score-stat">-</div>
                                    <div class="stat-label">Mejor Puntuaci√≥n</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚è±Ô∏è</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="avg-time">-</div>
                                    <div class="stat-label">Tiempo Promedio</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üéØ</div>
                                <div class="stat-info">
                                    <div class="stat-value" id="avg-moves">-</div>
                                    <div class="stat-label">Movimientos Promedio</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="charts-section">
                            <div class="chart-card">
                                <h4>üìä Distribuci√≥n por Niveles</h4>
                                <div id="levels-chart" class="chart-container">
                                    <!-- Chart se genera din√°micamente -->
                                </div>
                            </div>
                            <div class="chart-card">
                                <h4>üìà Progreso √öltimos 7 D√≠as</h4>
                                <div id="progress-chart" class="chart-container">
                                    <!-- Chart se genera din√°micamente -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab B√∫squeda -->
                    <div id="search-tab" class="tab-content">
                        <div class="search-section">
                            <input type="text" id="search-player" placeholder="Buscar por nombre de jugador...">
                            <button id="search-btn" class="btn btn-primary">üîç Buscar</button>
                        </div>
                        <div id="search-results" class="rankings-table">
                            <!-- Resultados de b√∫squeda -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal de Ayuda -->
        <div id="help-modal" class="modal hidden">
            <div class="modal-content help-content">
                <div class="modal-header">
                    <h2>‚ùì Gu√≠a de Juego</h2>
                    <button id="close-help" class="btn btn-close">√ó</button>
                </div>
                
                <div class="help-tabs">
                    <button class="help-tab-btn active" data-tab="powerups">‚ö° Power-ups</button>
                    <button class="help-tab-btn" data-tab="controls">üéÆ Controles</button>
                    <button class="help-tab-btn" data-tab="scoring">üèÜ Puntuaci√≥n</button>
                    <button class="help-tab-btn" data-tab="tips">üí° Consejos</button>
                </div>

                <div class="help-content-area">
                    <!-- Tab Power-ups -->
                    <div id="powerups-help" class="help-tab-content active">
                        <h3>‚ö° Power-ups Disponibles</h3>
                        
                        <div class="powerup-explanation">
                            <div class="powerup-card">
                                <div class="powerup-visual">
                                    <span class="powerup-icon-large">üí°</span>
                                    <span class="powerup-name">Pista (Hint)</span>
                                    <span class="powerup-uses">3 usos por nivel</span>
                                </div>
                                <div class="powerup-description">
                                    <h4>¬øQu√© hace?</h4>
                                    <p>Revela una pareja de cartas durante 3 segundos con un brillante efecto dorado.</p>
                                    <h4>¬øCu√°ndo usarlo?</h4>
                                    <p>Perfecto cuando te sientes bloqueado o quieres ahorrar tiempo en niveles dif√≠ciles.</p>
                                    <h4>Costo</h4>
                                    <p>-50 puntos por cada uso</p>
                                    <div class="shortcut">Tecla r√°pida: <kbd>1</kbd></div>
                                </div>
                            </div>

                            <div class="powerup-card">
                                <div class="powerup-visual">
                                    <span class="powerup-icon-large">‚ùÑÔ∏è</span>
                                    <span class="powerup-name">Congelar (Freeze)</span>
                                    <span class="powerup-uses">2 usos por nivel</span>
                                </div>
                                <div class="powerup-description">
                                    <h4>¬øQu√© hace?</h4>
                                    <p>Detiene el temporizador durante 10 segundos. Las cartas adquieren un tono azulado.</p>
                                    <h4>¬øCu√°ndo usarlo?</h4>
                                    <p>Ideal cuando se acaba el tiempo o necesitas concentrarte sin presi√≥n temporal.</p>
                                    <h4>Costo</h4>
                                    <p>Sin penalizaci√≥n en puntuaci√≥n</p>
                                    <div class="shortcut">Tecla r√°pida: <kbd>2</kbd></div>
                                </div>
                            </div>

                            <div class="powerup-card">
                                <div class="powerup-visual">
                                    <span class="powerup-icon-large">üîÄ</span>
                                    <span class="powerup-name">Reorganizar (Shuffle)</span>
                                    <span class="powerup-uses">1 uso por nivel</span>
                                </div>
                                <div class="powerup-description">
                                    <h4>¬øQu√© hace?</h4>
                                    <p>Baraja todas las cartas no emparejadas, cambiando completamente el tablero.</p>
                                    <h4>¬øCu√°ndo usarlo?</h4>
                                    <p>√ösalo estrat√©gicamente cuando las cartas est√©n en posiciones dif√≠ciles de recordar.</p>
                                    <h4>Costo</h4>
                                    <p>Sin penalizaci√≥n en puntuaci√≥n</p>
                                    <div class="shortcut">Tecla r√°pida: <kbd>3</kbd></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab Controles -->
                    <div id="controls-help" class="help-tab-content">
                        <h3>üéÆ Controles del Juego</h3>
                        <div class="controls-grid">
                            <div class="control-item">
                                <kbd>Click</kbd>
                                <span>Voltear cartas</span>
                            </div>
                            <div class="control-item">
                                <kbd>1</kbd>
                                <span>Usar power-up Pista</span>
                            </div>
                            <div class="control-item">
                                <kbd>2</kbd>
                                <span>Usar power-up Congelar</span>
                            </div>
                            <div class="control-item">
                                <kbd>3</kbd>
                                <span>Usar power-up Reorganizar</span>
                            </div>
                            <div class="control-item">
                                <kbd>Escape</kbd>
                                <span>Cerrar mensajes</span>
                            </div>
                        </div>
                    </div>

                    <!-- Tab Puntuaci√≥n -->
                    <div id="scoring-help" class="help-tab-content">
                        <h3>üèÜ Sistema de Puntuaci√≥n</h3>
                        <div class="scoring-breakdown">
                            <div class="score-item">
                                <span class="score-type">Base</span>
                                <span class="score-formula">Parejas √ó 100</span>
                                <span class="score-example">7 pares = 700 pts</span>
                            </div>
                            <div class="score-item positive">
                                <span class="score-type">Bonus Tiempo</span>
                                <span class="score-formula">Tiempo restante √ó 5</span>
                                <span class="score-example">30s = +150 pts</span>
                            </div>
                            <div class="score-item positive">
                                <span class="score-type">Juego Perfecto</span>
                                <span class="score-formula">Sin errores</span>
                                <span class="score-example">+500 pts</span>
                            </div>
                            <div class="score-item positive">
                                <span class="score-type">Multiplicador Nivel</span>
                                <span class="score-formula">Nivel √ó 0.1 + 1</span>
                                <span class="score-example">Nivel 3 = √ó1.3</span>
                            </div>
                            <div class="score-item negative">
                                <span class="score-type">Penalizaci√≥n Movimientos</span>
                                <span class="score-formula">Movimientos extra √ó 10</span>
                                <span class="score-example">3 extra = -30 pts</span>
                            </div>
                            <div class="score-item negative">
                                <span class="score-type">Penalizaci√≥n Pistas</span>
                                <span class="score-formula">Pistas usadas √ó 50</span>
                                <span class="score-example">2 pistas = -100 pts</span>
                            </div>
                        </div>
                    </div>

                    <!-- Tab Consejos -->
                    <div id="tips-help" class="help-tab-content">
                        <h3>üí° Consejos Estrat√©gicos</h3>
                        <div class="tips-list">
                            <div class="tip-item">
                                <span class="tip-icon">üß†</span>
                                <div class="tip-content">
                                    <h4>Memoriza Patrones</h4>
                                    <p>Crea asociaciones mentales entre los emojis y sus posiciones. Por ejemplo: "El üê∂ est√° arriba a la izquierda".</p>
                                </div>
                            </div>
                            <div class="tip-item">
                                <span class="tip-icon">‚ö°</span>
                                <div class="tip-content">
                                    <h4>Usa Power-ups Estrat√©gicamente</h4>
                                    <p>Guarda las pistas para los niveles m√°s dif√≠ciles. El congelamiento es perfecto cuando quedan pocos segundos.</p>
                                </div>
                            </div>
                            <div class="tip-item">
                                <span class="tip-icon">üéØ</span>
                                <div class="tip-content">
                                    <h4>Juega con M√©todo</h4>
                                    <p>Voltea cartas sistem√°ticamente (fila por fila) en lugar de aleatoriamente. Esto ayuda a crear un mapa mental.</p>
                                </div>
                            </div>
                            <div class="tip-item">
                                <span class="tip-icon">‚è±Ô∏è</span>
                                <div class="tip-content">
                                    <h4>Gestiona el Tiempo</h4>
                                    <p>No te apresures al principio. Es mejor ser preciso que r√°pido. La velocidad viene con la pr√°ctica.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Informaci√≥n del juego -->
        <div class="game-stats">
            <div class="stat">
                <span class="stat-label">Mejor Puntuaci√≥n:</span>
                <span id="best-score" class="stat-value">-</span>
            </div>
            <div class="stat">
                <span class="stat-label">Nivel M√°ximo:</span>
                <span id="max-level" class="stat-value">1</span>
            </div>
        </div>
    </div>

        <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <script src="database.js"></script>
    <script src="script.js"></script>
</body>
</html>
</body>
</html>
